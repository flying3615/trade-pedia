import type { Strategy } from '../../../../lib/options/types';

const strategy: Strategy = {
  id: 'butterfly-call',
  name: '蝶式价差 (Call Butterfly)',
  referencePrice: 100,
  tags: ['方向：中性', '支付权利金', '风险/收益：有限'],
  summary: '买入一份低执行价和一份高执行价的看涨期权，同时卖出两份中间执行价的看涨期权，以博取股价在目标价位附近盘整的收益。',
  description: '蝶式价差是一种中性策略，适用于预期股价在未来一段时间内波动性很小，会稳定在某个特定价格附近的情况。它通过构建一个“帐篷”形的盈亏曲线，在中间执行价达到最大利润。如果股价大幅上涨或下跌，亏损将被限制在最初支付的少量净权利金内。',
  concept: '这个策略就像是为股价设置一个“精准的靶心”。你花少量成本，赌股价最终会停在靶心（中间执行价）上。你买入两边的期权作为“护栏”，确保即使脱靶，你的损失也不会太大。你卖出的中间期权是你主要的利润来源，只要股价足够接近靶心，你就能赚钱。离靶心越近，赚得越多。',
  pros: [
    '**风险有限**：最大亏损是确定的，即你最初支付的净权利金。',
    '**成本较低**：相比其他策略，建立蝶式价差的成本通常很低。',
    '**高潜在回报率**：如果股价精确地收在中间执行价，投资回报率会非常高。',
  ],
  cons: [
    '**盈利区间狭窄**：只有当股价停留在非常窄的范围内时才能盈利，对价格预测的精度要求高。',
    '**时间价值损耗**：如果股价没有如预期般稳定，时间的流逝会对你不利。',
    '**可能提前指派**：卖出的看涨期权有被提前行权的风险。',
  ],
  example: (
    <div>
      <p>你预测M公司股票（当前股价$100）在一个月后会非常接近$100。于是你建立了一个蝶式价差：</p>
      <ul>
        <li>买入1张执行价为$95的看涨期权，花费$3/股（共$300）。</li>
        <li>卖出2张执行价为$100的看涨期权，每张收入$2/股（共$400）。</li>
        <li>买入1张执行价为$105的看涨期权，花费$2/股（共$200）。</li>
      </ul>
      <p>你总共花费了 <strong>$100</strong> 的净权利金 ($300 - $400 + $200)，这是你的最大潜在亏损。</p>
      <p><strong>情景一：股价到期时收于$100（理想情况）</strong></p>
      <p>你买入的$95看涨期权盈利$500，卖出的$100看涨期权价值为零，买入的$105看涨期权也价值为零。你的净利润为 $500 - $100 (成本) = <strong>$400</strong>，这是最大利润。</p>
      <p><strong>情景二：股价到期时收于$95或$105之外</strong></p>
      <p>所有期权都将变为废纸或相互抵消，你将损失全部初始投入的 <strong>$100</strong>。</p>
      <p><strong>盈亏平衡点</strong></p>
      <p>此策略有两个盈亏平衡点：<em>$95 + $1 = $96</em> 和 <em>$105 - $1 = $104</em>。股价在$96到$104之间是你的盈利区间。</p>
    </div>
  ),
  formula: [
    '最大盈利 = (中间执行价 - 低执行价) × 合约乘数 - 净权利金',
    '最大亏损 = 支付的净权利金',
    '上方盈亏平衡点 = 高执行价 - 每股净权利金',
    '下方盈亏平衡点 = 低执行价 + 每股净权利金',
  ],
  legs: [
    { id: 'lc1', kind: 'option', position: 'long', qty: 1, multiplier: 100, entryPrice: 3, option: { type: 'call', strike: 95 } },
    { id: 'sc2', kind: 'option', position: 'short', qty: 2, multiplier: 100, entryPrice: 2, option: { type: 'call', strike: 100 } },
    { id: 'lc2', kind: 'option', position: 'long', qty: 1, multiplier: 100, entryPrice: 2, option: { type: 'call', strike: 105 } },
  ],
};

export default strategy;
