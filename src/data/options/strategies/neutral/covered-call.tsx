import type { Strategy } from '../../../../lib/options/types';

const strategy: Strategy = {
  id: 'covered-call',
  name: '备兑看涨期权 (Covered Call)',
  referencePrice: 100,
  tags: ['持仓管理', '收取权利金', '风险：下行暴露', '新手入门'],
  summary: '一种在持有股票的同时，卖出看涨期权来赚取额外收入的策略。它像是把你的股票“租”出去收取租金（权利金）。此策略能降低持股成本，但在股价大涨时会限制你的利润上限。',
  description: '备兑开仓（Covered Call）是一种流行于长期持股者的策略。如果你拥有至少100股某支股票，并认为它在短期内不会大幅上涨，你就可以卖出一份对应这些股票的看涨期权。作为卖方，你会立即收到一笔权利金。这个策略的代价是，你放弃了股票在期权执行价之上的潜在涨幅。',
  concept: '想象你是一位房东，拥有一套房子（100股股票）。你认为在接下来的几个月里，房价不会暴涨。于是，你把这套房子租出去，立刻收到一笔租金（权利金）。作为交换，你给了租客一个“优惠购房权”：如果未来房价涨到一个约定的高价（执行价），租客有权以这个价格从你手中买走房子。如果房价没涨到那么高，你白赚了租金，房子也还在。如果房价大涨并超过了约定价格，你就只能以那个较低的约定价格把房子卖掉，错过了房价的超额涨幅。',
  pros: [
    '**创造额外收入**：无论股价是涨是跌还是盘整，卖出期权收到的权利金都是你的确定性收入，有效降低了持股成本。',
    '**提高收益率**：在股价盘整或小幅上涨时，该策略的总回报（股价上涨+权利金）会超过单纯持股。',
    '**利用闲置资产**：让长期持有的股票为你“工作”，产生现金流。'
  ],
  cons: [
    '**利润上限**：这是最大的缺点。你用未来的潜在巨大收益，换取了眼前一笔较小的权利金。如果股票成为黑马大涨，你会错失大部分利润。',
    '**下行风险几乎不变**：收到的权利金能提供的下跌保护非常有限。如果股价大跌，你的亏损几乎和直接持有股票一样严重。'
  ],
  risks: ['提前指派风险', '除权除息影响期权定价与指派概率'],
  example: (
    <div>
      <p>假设你持有100股C公司的股票，买入成本为每股$95。当前股价为$100。你认为短期内股价不会超过$110，于是你决定卖出一张执行价为$110、一个月后到期的看涨期权，并立即收到了$4/股的权利金（共$400）。</p>
      <p><strong>情景一：股价到期时收于$108（温和上涨）</strong></p>
      <p>期权未达到执行价，不会被行权。你保留了你的100股股票，同时净赚了$400的权利金。你的总收益 = 股票浮盈 + 权利金 = ($108 - $95) * 100 + $400 = $1300 + $400 = $1700。</p>
      <p><strong>情景二：股价到期时收于$120（大幅上涨）</strong></p>
      <p>期权被行权。你必须以$110的价格卖出你的100股股票。你的收益被锁定。总收益 = (卖出价 - 成本价) * 100 + 权利金 = ($110 - $95) * 100 + $400 = $1500 + $400 = $1900。虽然也赚了钱，但如果没卖期权，你可以赚 ($120 - $95) * 100 = $2500。</p>
      <p><strong>情景三：股价到期时收于$90（下跌）</strong></p>
      <p>期权不会被行权。你保留股票，净赚$400权利金。但你的股票亏损了 ($95 - $90) * 100 = $500。你的总亏损 = $500 - $400 = $100。收到的权利金部分抵消了你的持股亏损。</p>
    </div>
  ),
  formula: [
    '最大收益 ≈ (执行价 - 股票成本) × 股数 + 净权利金',
    '最大亏损 ≈ (股票成本 - 0) × 股数 - 净权利金（理论上接近持股风险）'
  ],
  stepNotes: [
    'Step 1：持有股票，多头线性暴露，价格越高越盈利，越低越亏损。',
    'Step 2：卖出看涨，曲线在执行价处被“压平”，上行收益被封顶，同时获得权利金抬高整体曲线。'
  ],
  legs: [
    { id: 'stock', kind: 'stock', position: 'long', qty: 100, entryPrice: 100 },
    { id: 'short-call', kind: 'option', position: 'short', qty: 1, multiplier: 100, entryPrice: 3, option: { type: 'call', strike: 105 } },
  ],
}

export default strategy
