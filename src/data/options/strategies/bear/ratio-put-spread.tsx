import type { Strategy } from '../../../../lib/options/types';

const strategy: Strategy = {
  id: 'ratio-put-spread',
  name: '看跌比例价差 (Ratio Put Spread 1x2)',
  referencePrice: 100,
  tags: ['方向：温和看空', '波动率策略', '风险：较大'],
  summary: '买入1份较高执行价的看跌期权，同时卖出2份或更多较低执行价的看跌期权，通常以零成本或净收入建立。',
  description: '看跌比例价差是一种复杂的策略，旨在从股价的小幅下跌或横盘中获利。通过卖出更多份数的虚值看跌期权，其收入可以完全覆盖（甚至超过）买入看跌期权的成本。策略在股价跌至卖出期权执行价时达到最大利润，但如果股价继续暴跌，风险将转为无限。',
  concept: '这个策略像是“带杠杆的保险”。你买了一份价格下跌的保险（买入1份看跌），然后为了让这份保险免费，你向两个人分别卖出了一份“价格暴跌”的保险（卖出2份看跌）。如果价格只是小跌，你的保险生效了，而你卖出的保险都没事，你就赚了。但如果价格真的暴跌，你不仅自己的保险要赔，你卖给别人的两份保险中有一份也需要你自掏腰包赔付，导致亏损。',
  pros: [
    '**零成本或净收入**：通常可以构造为零成本（Zero-Cost）甚至是净收入（Credit）的头寸。',
    '**时间价值正向收益**：如果构建为净收入策略，时间的流逝对你有利。',
    '**在目标区间内收益高**：如果股价精确地跌到卖出期权的执行价，收益会非常可观。',
  ],
  cons: [
    '**下行风险无限**：这是此策略最大的缺点。如果股价跌破卖出期权的执行价并持续下跌，亏损会无限增加。',
    '**需要保证金**：由于有裸卖的期权头寸，需要较高的保证金。',
    '**盈利区间狭窄**：最大利润点非常精确，股价稍微偏离就会减少利润。',
  ],
  example: (
    <div>
      <p>你认为F公司股票（当前股价$100）可能会小幅下跌或盘整，但不会暴跌。你建立了一个1x2的看跌比例价差：</p>
      <ul>
        <li>买入1张执行价为$100的看跌期权，花费$4/股（共$400）。</li>
        <li>卖出2张执行价为$95的看跌期权，每张收入$2/股（共$400）。</li>
      </ul>
      <p>你的净权利金支出为 $0，这是一个零成本策略。</p>
      <p><strong>情景一：股价到期时收于$95（理想情况）</strong></p>
      <p>你买入的$100看跌期权价值$5/股，盈利$500。你卖出的两张$95看跌期权刚好到价，价值为零。你的总利润为 <strong>$500</strong>，这是最大利润。</p>
      <p><strong>情景二：股价到期时暴跌至$85</strong></p>
      <p>你买入的$100看跌期权盈利$15/股 ($1500)。但你卖出的两张$95看跌期权每张亏损$10/股，总计亏损$2000。综合来看，你的净亏损为 <strong>$500</strong> ($1500 - $2000)。</p>
      <p><strong>盈亏平衡点</strong></p>
      <p>此策略有两个盈亏平衡点。上方的是 <em>$100 - $0 = $100</em>。下方的是 <em>$95 - ($95 - $100) = $90</em>。股价在$90到$100之间是盈利区间。</p>
    </div>
  ),
  formula: [
    '最大盈利 = (高执行价 - 低执行价) × 合约乘数 + 净权利金',
    '下行风险 ≈ 无限',
    '上方盈亏平衡点 = 买入看跌的执行价 - 每股净权利金',
    '下方盈亏平衡点 = 卖出看跌的执行价 - (最大盈利 / 合约乘数)',
  ],
  legs: [
    { id: 'lp100', kind: 'option', position: 'long',  qty: 1, multiplier: 100, entryPrice: 4, option: { type: 'put',  strike: 100 } },
    { id: 'sp95x2', kind: 'option', position: 'short', qty: 2, multiplier: 100, entryPrice: 2, option: { type: 'put',  strike: 95  } },
  ],
};

export default strategy;
